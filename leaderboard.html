<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbywXhhgL-HKpir9nrWZ2JXTy6mzy2a2aqJoUvss8z-LTQTmTg8SdHz4jnq5uJUCXq9lEQ/exec";

  // æ·»åŠ æ’ååœ–æ¨™
  function getRankEmoji(rank) {
    if (rank === 0) return 'ğŸ¥‡';
    if (rank === 1) return 'ğŸ¥ˆ';
    if (rank === 2) return 'ğŸ¥‰';
    return 'ğŸ¯';
  }

  fetch(API_URL + "?action=getLeaderboard")
    .then(response => {
      if (!response.ok) throw new Error('ç¶²è·¯å›æ‡‰éŒ¯èª¤');
      return response.json();
    })
    .then(result => {
      const content = document.getElementById('lbContent');
      const list = result.data || result;
      
      if (Array.isArray(list) && list.length > 0) {
        content.innerHTML = list.map((item, i) => `
          <div class="lb-item">
            <span>${getRankEmoji(i)} #${i+1} ${item.playerName || 'ç„¡åæ°'}</span>
            <strong>${item.score?.toLocaleString() || 0} åˆ†</strong>
          </div>`).join('');
        content.className = "";
      } else {
        content.innerHTML = "ğŸ® ç›®å‰å°šç„¡ç©å®¶ç´€éŒ„ï¼Œå¿«ä¾†æˆç‚ºç¬¬ä¸€åå§ï¼";
      }
    })
    .catch(error => {
      console.error("Error:", error);
      document.getElementById('lbContent').innerHTML = 
        "âŒ è³‡æ–™è®€å–å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦";
    });
</script>

